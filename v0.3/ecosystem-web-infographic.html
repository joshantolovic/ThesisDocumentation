<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f5f5f5;
    padding: 40px 20px;
  }
  
  .container {
    max-width: 1400px;
    margin: 0 auto;
    background: white;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  }
  
  h1 {
    text-align: center;
    color: #2c3e50;
    margin-bottom: 10px;
    font-size: 32px;
  }
  
  .subtitle {
    text-align: center;
    color: #7f8c8d;
    margin-bottom: 40px;
    font-size: 16px;
  }
  
  /* Main flow: Left to Right */
  .main-flow {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 60px;
    position: relative;
  }
  
  .system-box {
    flex: 0 0 280px;
    padding: 24px;
    border-radius: 12px;
    border: 3px solid;
    background: #fafafa;
    position: relative;
  }
  
  .system-box h2 {
    font-size: 22px;
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .system-box p {
    font-size: 14px;
    color: #2c3e50;
    line-height: 1.6;
    margin-bottom: 8px;
  }
  
  .system-box .detail {
    font-size: 12px;
    color: #7f8c8d;
    font-style: italic;
    line-height: 1.5;
  }
  
  /* Color coding */
  .rain { border-color: #3498db; }
  .rain h2 { color: #3498db; }
  
  .soil { border-color: #8b4513; }
  .soil h2 { color: #8b4513; }
  
  .plants { border-color: #27ae60; }
  .plants h2 { color: #27ae60; }
  
  /* Arrows between boxes */
  .arrow {
    flex: 0 0 120px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
  }
  
  .arrow-line {
    width: 100%;
    height: 4px;
    background: currentColor;
    position: relative;
    margin: 8px 0;
  }
  
  .arrow-line::after {
    content: '';
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    border-left: 12px solid currentColor;
    border-top: 8px solid transparent;
    border-bottom: 8px solid transparent;
  }
  
  .arrow-label {
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 4px;
    color: currentColor;
  }
  
  .arrow-sublabel {
    font-size: 11px;
    color: #7f8c8d;
  }
  
  .arrow.blue { color: #3498db; }
  .arrow.brown { color: #8b4513; }
  .arrow.green { color: #27ae60; }
  
  /* Bottom section: Competition and Time */
  .bottom-section {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 40px;
    margin-top: 60px;
    position: relative;
  }
  
  .system-box.competition {
    border-color: #e74c3c;
    flex: 1;
  }
  
  .competition h2 { color: #e74c3c; }
  
  .system-box.time {
    border-color: #9b59b6;
    flex: 0 0 320px;
  }
  
  .time h2 { color: #9b59b6; }
  
  /* Feedback arrows (dashed) */
  .feedback-section {
    margin-top: 40px;
    padding: 24px;
    background: #f8f9fa;
    border-radius: 8px;
    border-left: 4px solid #27ae60;
  }
  
  .feedback-section h3 {
    color: #27ae60;
    margin-bottom: 16px;
    font-size: 18px;
  }
  
  .feedback-item {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
    padding: 12px;
    background: white;
    border-radius: 6px;
    border: 2px dashed;
  }
  
  .feedback-item.green { border-color: #27ae60; }
  .feedback-item.red { border-color: #e74c3c; }
  .feedback-item.purple { border-color: #9b59b6; }
  
  .feedback-item strong {
    margin-right: 12px;
    min-width: 200px;
  }
  
  .feedback-item .green-text { color: #27ae60; }
  .feedback-item .red-text { color: #e74c3c; }
  .feedback-item .purple-text { color: #9b59b6; }
  
  /* Legend */
  .legend {
    margin-top: 40px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 2px solid #95a5a6;
  }
  
  .legend h3 {
    font-size: 16px;
    margin-bottom: 12px;
    color: #2c3e50;
  }
  
  .legend-items {
    display: flex;
    gap: 32px;
    flex-wrap: wrap;
  }
  
  .legend-item {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  
  .legend-line {
    width: 50px;
    height: 4px;
    background: #3498db;
    position: relative;
  }
  
  .legend-line::after {
    content: '';
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    border-left: 10px solid #3498db;
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
  }
  
  .legend-line.dashed {
    background: linear-gradient(to right, #27ae60 0%, #27ae60 50%, transparent 50%, transparent 100%);
    background-size: 8px 4px;
  }
  
  .legend-line.dashed::after {
    border-left-color: #27ae60;
  }
  
  @media print {
    body {
      background: white;
      padding: 0;
    }
    .container {
      box-shadow: none;
    }
  }
</style>
</head>
<body>
  <div class="container">
    <h1>The Big Picture: How Systems Connect</h1>
    <p class="subtitle">The ecosystem loop - what affects what</p>
    
    <!-- Main horizontal flow -->
    <div class="main-flow">
      <!-- Rain System -->
      <div class="system-box rain">
        <h2>‚òÅÔ∏è Rain System</h2>
        <p>Raindrops fall randomly across the world</p>
        <p class="detail">Speed: 8 units/sec<br>Count: 200 drops</p>
      </div>
      
      <!-- Arrow 1 -->
      <div class="arrow blue">
        <div class="arrow-label">Drops add moisture</div>
        <div class="arrow-line"></div>
        <div class="arrow-sublabel">+0.1 per impact</div>
      </div>
      
      <!-- Soil System -->
      <div class="system-box soil">
        <h2>üíß Soil Grid</h2>
        <p>48√ó27 moisture tiles<br>from dry (brown) to wet (blue)</p>
        <p class="detail">Starts with Perlin noise pattern</p>
      </div>
      
      <!-- Arrow 2 -->
      <div class="arrow brown">
        <div class="arrow-label">Plants sense moisture</div>
        <div class="arrow-line"></div>
        <div class="arrow-sublabel">Within root radius</div>
      </div>
      
      <!-- Plant System -->
      <div class="system-box plants">
        <h2>üå± Plants</h2>
        <p>90 plants competing for water and light</p>
        <p class="detail">Each has random vigor (0.7-1.3)</p>
      </div>
    </div>
    
    <!-- Bottom section: Competition + Time -->
    <div class="bottom-section">
      <div class="system-box competition">
        <h2>‚öîÔ∏è Competition Rules</h2>
        <p>Who wins contested water tiles?</p>
        <p class="detail">Priority = vigor √ó biomass<br>Highest priority wins</p>
      </div>
      
      <div class="system-box time">
        <h2>‚è±Ô∏è Time Scale</h2>
        <p>Controls simulation speed</p>
        <p class="detail">0.1√ó (slow) | 1√ó (normal) | 5√ó (fast)<br><br>Affects: rain speed, growth rate</p>
      </div>
    </div>
    
    <!-- Feedback loops section -->
    <div class="feedback-section">
      <h3>‚Ü©Ô∏è Feedback Loops (How Systems Talk Back)</h3>
      
      <div class="feedback-item green">
        <strong class="green-text">Plants ‚Üí Soil:</strong>
        <span>Extract water (-0.01 per growth cycle)</span>
      </div>
      
      <div class="feedback-item green">
        <strong class="green-text">Plants ‚Üí Competition:</strong>
        <span>Plants ask: "Who's near me?" (neighbor count, biomass)</span>
      </div>
      
      <div class="feedback-item red">
        <strong class="red-text">Competition ‚Üí Plants:</strong>
        <span>Competition results (etiolation modifiers + priority scores)</span>
      </div>
      
      <div class="feedback-item purple">
        <strong class="purple-text">Time ‚Üí Rain:</strong>
        <span>Speed multiplier (affects falling speed)</span>
      </div>
      
      <div class="feedback-item purple">
        <strong class="purple-text">Time ‚Üí Plants:</strong>
        <span>Growth rate multiplier (affects check interval)</span>
      </div>
    </div>
    
    <!-- Legend -->
    <div class="legend">
      <h3>Key:</h3>
      <div class="legend-items">
        <div class="legend-item">
          <div class="legend-line"></div>
          <span>Direct effect (solid arrow)</span>
        </div>
        <div class="legend-item">
          <div class="legend-line dashed"></div>
          <span>Feedback loop (dashed border)</span>
        </div>
      </div>
      <p style="margin-top: 12px; font-size: 12px; color: #7f8c8d; font-style: italic;">
        Solid arrows = information flow | Feedback loops = resource extraction/modification
      </p>
    </div>
  </div>
</body>
</html>